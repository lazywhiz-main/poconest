# 分析スペースUI整理 - 実装ToDo管理

## 🎯 プロジェクト概要
現在の分析スペースの煩雑なボタン配置を5つのメインカテゴリーに整理し、サイドピーク方式で使いやすいUIに再設計する。

## 📋 実装フェーズ別ToDo

### Phase 1: メインメニュー構造変更 ⭐ 優先度：HIGH ✅ **DONE**
- [x] **P1.1** 現在の横並びボタン群の調査と整理
- [x] **P1.2** 5つのメインカテゴリーボタンの作成
  - Relations 🔗
  - Clustering 🎛️
  - Theory Building 🧠
  - View & Navigation 🗺️
  - Search & Filter 🔍
- [x] **P1.3** サイドピーク共通コンポーネントの設計・実装
- [x] **P1.4** メインメニューとサイドピークの基本動作確認

### Phase 2: Relations サイドピーク実装 ⭐ 優先度：HIGH 🚧 **IN PROGRESS**
- [x] **P2.1** Relations関連機能の現状調査
  - 🔗 統合関係性分析（増分）
  - 🗑️ Relations一括削除
  - 🧹 Relations重複削除
  - 🎛️ パラメータ設定
  - 🔍 Relations分析
  - 🧠 統合分析（実験版）
  - 🚀 完全分析強制実行
- [x] **P2.2** タブ1「作成・設定」の実装
  - パラメータ設定UI
  - 作成実行ボタン群
  - 結果表示エリア統合
- [x] **P2.3** タブ2「関係性一覧・管理」の実装
  - 現在の関係性リスト表示（プレースホルダー）
  - 一括管理機能
  - 統計情報表示
- [x] **P2.4** 既存機能との互換性確認
- [x] **P2.5** 動作テスト・デバッグ
- [ ] **P2.6** 分析結果表示のサイドピーク統合 ⭐ 優先度：MEDIUM-HIGH
  - **P2.6.1** RelationsResultPanel.tsx コンポーネント作成
  - **P2.6.2** RelationsSidePeak.tsx に統合
  - **P2.6.3** NetworkVisualization.tsx の修正
  - **P2.6.4** 統合テスト・動作確認

### Phase 3: Clustering サイドピーク実装 ⭐ 優先度：HIGH
- [ ] **P3.1** 既存クラスタリングパネルの移行準備
- [ ] **P3.2** タブ1「クラスタリング実施」の実装
  - 条件設定エリア（シンプル・高度）
  - 結果表示エリア
  - 保存ボタン
- [ ] **P3.3** タブ2「表示中のクラスター」の実装
  - 左下フィルター領域からクラスター表示機能移行
  - クラスター一覧・詳細情報
  - 表示設定（ラベル・色分け・透明度）
- [ ] **P3.4** タブ3「保存済みビュー」の実装
  - 既存ClusterViewManager統合
  - ビューリスト・読み込み・削除
- [ ] **P3.5** 動作テスト・デバッグ

### Phase 4: Theory Building サイドピーク実装 ⭐ 優先度：MEDIUM
- [ ] **P4.1** GroundedTheoryManager の現状確認
- [ ] **P4.2** Theory Building サイドピークの実装
  - Grounded Theory Analysis メニュー
  - 広めのサイドピーク表示
  - 将来の分析手法追加準備
- [ ] **P4.3** 動作テスト・デバッグ

### Phase 5: View & Navigation サイドピーク実装 ⭐ 優先度：MEDIUM
- [ ] **P5.1** 既存機能の現状調査
  - Reset View
  - Auto Layout
  - Mini Map
  - Views管理
- [ ] **P5.2** 直接実行ボタンエリアの実装
  - Reset View（即実行）
  - Auto Layout（即実行）
  - Minimap表示切り替え
- [ ] **P5.3** ビュー保存・管理エリアの実装
  - 既存Views機能の統合
- [ ] **P5.4** 動作テスト・デバッグ

### Phase 6: Search & Filter サイドピーク実装 ⭐ 優先度：MEDIUM
- [ ] **P6.1** 左下フィルター領域の現状調査
- [ ] **P6.2** Search & Filter サイドピークの実装
  - ノード検索機能（内容・タイトル・作成者・ID）
  - ノート（カード）フィルター
  - 関係性フィルター
  - 表示制御
- [ ] **P6.3** 左下フィルター領域の段階的移行
- [ ] **P6.4** 動作テスト・デバッグ

### Phase 7: 最終調整・最適化 ⭐ 優先度：LOW
- [ ] **P7.1** フローティングコントロールの調整
- [ ] **P7.2** 全体的なUI/UX調整
- [ ] **P7.3** パフォーマンス最適化
- [ ] **P7.4** レスポンシブ対応
- [ ] **P7.5** 総合テスト

## 🚨 実装時の注意事項

### 既存機能の保持
- [ ] **既存の全機能・ロジックを完全に保持**
- [ ] **ユーザーの操作フローを極力変更しない**
- [ ] **パフォーマンスの劣化を避ける**

### 段階的実装
- [ ] **一度に全てを変更せず、段階的にリファクタリング**
- [ ] **各段階で動作確認を徹底**
- [ ] **ロールバック可能な実装**

### 動作確認ポイント
- [ ] **Relations作成・削除の動作確認**
- [ ] **Clustering実行・表示の動作確認**
- [ ] **Grounded Theory分析の動作確認**
- [ ] **ビューポート操作の動作確認**
- [ ] **検索・フィルタリングの動作確認**

## 📊 進捗管理

### 現在の状況
- ✅ **設計フェーズ完了** - `docs/analysis-space-menu-redesign.md`
- ✅ **Phase 1 完了** - メインメニュー構造変更・サイドピーク基盤
- ✅ **Phase 2 実装中** - Relations サイドピーク（P2.1-P2.3完了）
- 🚧 **現在**: P2.4-P2.5（動作確認・デバッグ）

### 次のアクション
1. **Phase 2完了** - Relations サイドピーク動作確認・デバッグ
2. **Phase 3開始** - Clustering サイドピーク実装
3. 各フェーズ完了後に動作確認

---

**🎯 実装方針: 少しずつ動きをチェックしながら、確実に進める！**
